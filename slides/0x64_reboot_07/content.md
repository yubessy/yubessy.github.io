<!-- $theme: gaia -->

# 量子暗号

#### @yubessy

##### 0x64物語 Reboot #07

##### "セキュリティ・暗号・電子認証"

---

# 🎉 yubessy #10 🎉

#### 0x64 #08 - #10

#### 0x64 Reboot #01 - #07 ← today!

---

### 量子論

> 量子論（りょうしろん）とは、ある物理量が任意の値を取ることができず、特定の離散的な値しかとることができない、すなわち量子化を受けるような全ての現象と効果を扱う学問である。粒子と波動の二重性、物理的過程の不確定性、観測による不可避な擾乱も特徴である。量子論は、マックス・プランクの量子仮説まで遡る全ての理論、モデル、概念を包括する。量子仮説は1900年に、例えば光や物質構造に対する古典物理学的説明が限界に来ていたために産まれた。

*- https://ja.wikipedia.org/wiki/%E9%87%8F%E5%AD%90%E8%AB%96*

---

#### 不確定性原理 (Uncertainity Principle)

> ある時点の量子の状態を完全に知ることは不可能

直感的説明:

* 普通の世界
  * 物体に光を当てて反射させることで目に見える
  * 光を当てても物体の状態は変わらない
* 量子の世界
  * 量子に別の量子を衝突させることで状態を観測
  * 衝突によりもとの量子の状態が変化してしまう

---

#### 量子暗号 (Quantum Cryptography)

* 量子論を応用した暗号
* 不確定性原理により秘匿性を実現
  * 通信が成功すれば、その内容は他の誰にも
    知られていないことを保証
  * 誰か通信内容を傍受しようとしたら、それを
    通信前に検知できる
* 情報理論的安全性を保証
    * どれだけ計算量をかけても**理論的に解読不可能**
    * ⇔ 計算量的安全性(RSA, 楕円曲線, ....)

---

#### 量子鍵配送 (Quantum Key Distribution)

* 暗号鍵(キー)を第三者に知られずに共有するしくみ
  * 量子暗号論における最も基本的な問題
* 例: AliceはBobにキーを渡したい
  * キー = bit列 (011010010...)
  * 一度キーを渡せばあとはそれで通信
* QKDではキーをqubit(量子bit)化して送信
    * qubitは観測されると自身の状態が変化する
    * -> この性質を利用して第三者による傍受を検知

---

### BB84 (Bennett and Brassard, 1984)

* QKDのプロトコル
* キーを確率的にencode/decodeし、巧妙な方法で
  復元することで第三者に知られずにキーを共有
  * encode: bit -> qubit (by Alice)
  * decode: qubit -> bit (by Bob)
* **ここからが本日のメイン**

---

#### 1. (Alice) キーをqubit化して送信

* Aliceは各bitをいずれかのencodingで符号化
  * A: 0 → `0`, 1 → `1`
  * B: 0 → `+`, 1 → `-`
  * ※ `0`, `1`, `+`, `-`: qubit
* どちらを用いるかは**bit毎にランダムに選択**
  * Aliceは用いた各encodingを手元に記録

---

#### 1. (Alice) キーをqubit化して送信

| BB84  |             |       |       |       |       |       |
|-------|-------------|-------|-------|-------|-------|-------|
| Alice | Key Bits    |   0   |   0   |   1   |   1   |   0   |
|       | Encoding    |   A   |   B   |   B   |   A   |   B   |
|       | Qubits      |  `0`  |  `+`  |  `-`  |  `1`  |  `+`  |

---

#### 2. (Bob) 受信したqubitをbitに復元

* Bobは各qubitをいずれかのmeasurementで観測
  * α: `0` → 0, `1` → 1
  * β: `+` → 0, `-` → 1
* どちらを用いるかは**qubit毎にランダムに選択**
  * Bobは受信時点では各qubitがいずれのencoding
    でencodeされたのかを知らない
  * AliceのencodingとBobのmeasurementは
    1/2の確率で適合
  * Bobは用いた各measurementを手元に記録

---

#### 2. (Bob) 受信したqubitをbitに復元

* encondingに適したmeasurementを選ばなければ
  qubitからいずれのbitが得られるかは不定
  * `0` + α → 0, `1` + α → 1
  * `+` + β → 0, `-` + β → 1
  * `+` + α → **0/1 ???**, `-` + α → **0/1 ???**
  * `0` + β → **0/1 ???**, `1` + β → **0/1 ???**
* 量子状態の**重ね合わせ**によるもの
* = Bobがdecodeで得たbit列のうち**半分は無意味**

---

#### 2. (Bob) 受信したqubitをbitに復元

| BB84  |             |       |       |       |       |       |
|-------|-------------|-------|-------|-------|-------|-------|
| Alice | Key Bits    |   0   |   0   |   1   |   1   |   0   |
|       | Encoding    |   A   |   B   |   B   |   A   |   B   |
|       | Qubits      |  `0`  |  `+`  |  `-`  |  `1`  |  `+`  |
| Bob   | Measurement |   α   |   α   |   β   |   β   |   α   |
|       | Key Bits    |  `0`  |  `1`  |  `1`  |  `1`  |  `1`  |

---

#### 3. (Alice, Bob) encoding/measurementを照合

* 互いに用いたencoding/measurementを見せ合う
  * Alice: 各bitに適用したencoding(A/B)
  * Bob: 各qubitに適用したmeasurement(α/β)
* A×αまたはB×βが適用されたbitのみをキーとする
  * 確率的にもとのbit列の半分をキーとして使える
* 照合は**公開の通信経路**で行ってよい
  * 照合内容を見られてもキーは得られない

---

#### 3. (Alice, Bob) encoding/measurementを照合

| BB84  |             |       |       |       |       |       |
|-------|-------------|-------|-------|-------|-------|-------|
| Alice | Key Bits    | **0** | ~~0~~ | **1** | ~~1~~ | ~~0~~ |
|       | Encoding    | **A** |   B   | **B** |   A   |   B   |
|       | Qubits      |  `0`  |  `+`  |  `-`  |  `1`  |  `+`  |
| Bob   | Measurement | **α** |   α   | **β** |   β   |   α   |
|       | Key Bits    | **0** | ~~1~~ | **1** | ~~1~~ | ~~1~~ |

---

#### 4. (Alice, Bob) キーの一部を照合

* 互いに共有したキーの一部を見せ合う
  * 例: キーの先頭1024bit
* 照合部分が完全に一致した場合
  * 残りの部分を本当のキーとして利用
* 照合部分が一致しなかった場合
  * = qubitの状態が途中で観測されて変化した
  * = **第三者が通信を傍受**している可能性がある
  * → キーを破棄して最初から通信をやり直す

---

### 全体をもう一度

1. (Alice) キーをqubit化して送信
2. (Bob) 受信したqubitをbitに復元
3. (Alice, Bob) encoding/measurementを照合
4. (Alice, Bob) キーの一部を照合

---

### まとめ

* 不確定性原理
  * 物理学の「理論限界」を示す
* 量子暗号
  * 不確定性原理を逆手に取って安全な通信を実現
* BB84
  * 量子の性質を巧妙に利用したアルゴリズム
